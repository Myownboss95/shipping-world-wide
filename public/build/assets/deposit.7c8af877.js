import{b as D}from"./breadcrumb.2d4cfefa.js";import{i as A,x as f,A as V,c as F,r as E,a as l,b as m,d as n,e,F as y,g as N,u as s,t as i,n as v,m as L,w as g,h as p,B as S,q as U,E as q,Q as z}from"./main.bac42695.js";import{_ as H}from"./FormGroup.1462db17.js";import{a as b}from"./error.34acba4a.js";import{_ as w}from"./FormButton.0cc94290.js";import{_ as C}from"./ButtonLoader.0bb0d3b3.js";import"./FormInput.c5b264e0.js";const Q={class:"card shadow-lg radius-20 col-lg-9 mx-auto"},T={class:"card-body"},j={class:"row align-items-center py-3"},I={class:"col-md-6 border-end"},M={class:"row"},O=["onClick"],R={class:"border p-4 w-100"},Y=["src"],G={class:"col-12"},J={key:0},K={class:"col-md-6"},P={class:"px-3"},W={key:0,class:""},X=e("h4",null,"Instructions:",-1),Z=e("ol",null,[e("li",null,"Click on any of the Coins"),e("li",null,"Enter Amount to deposit."),e("li",null,"Click on continue."),e("li",null,"Scan or copy the wallet address."),e("li",null,"Transfer the amount to the wallet address you scanned or copied."),e("li",null,"Upload the proof of payment."),e("li",null,"And finally click on complete deposit.")],-1),ee=[X,Z],te={key:1,class:"text-center"},oe={class:"placeholder"},se=["src"],ae={class:"font-size-16 my-1"},le=e("i",{class:"fa fa-copy"},null,-1),ne=[le],ie={class:"mt-3"},de=p(" Copy the wallet address or scan the Qrcode above and send the equivalent of "),ce=p(" worth of "),re=p(" to the wallet address. "),me=e("p",null,"After payment, upload your proof of payment.",-1),we={name:"deposit",props:{payment_methods:Array,validated:{type:Boolean,default:!1},data:{type:Object,default:{}}},setup(k){const d=k,t=A({method_id:"",amount:"",pay_with:"main",proof:"",name:"",symbol:""}),c=f({});var _=f({});const x=(r,a,u)=>{d.validated?z("You cannot change method now. Refresh page."):(t.method_id=r,t.name=a,t.symbol=u,console.log(t),t.name,q.get(`https://api.coingecko.com/api/v3/simple/price?ids=${t.name}&vs_currencies=usd`).then(o=>{if(o.status==200)_.value=o.data,console.log(_);else throw b()}).catch(o=>{console.log(o)}))};V(()=>t.method_id,r=>{let a=d.payment_methods.filter((u,o)=>u.id==r);c.value=a[0]});const h=F(()=>t.method_id==""||d.validated),$=()=>{t.post(route("user.deposits.validate"))},B=()=>{t.post(route("user.deposits.store"))};return(r,a)=>{const u=E("Head");return l(),m(y,null,[n(u,{title:"Deposit"}),n(D,{title:"Deposit",crumbs:["Dashboard","Deposits","Deposit"]}),e("div",Q,[e("div",T,[e("div",j,[e("div",I,[e("div",M,[(l(!0),m(y,null,N(d.payment_methods,(o,ue)=>(l(),m("div",{class:U(["col-6 text-center my-2",{selected:s(t).method_id==o.id}]),onClick:_e=>x(o.id,o.name,o.symbol)},[e("div",R,[e("img",{src:`/storage/payment_methods/${o.svg}`,alt:"",class:"img-fluid",style:{width:"100px",height:"100px"}},null,8,Y),e("h6",null,i(o.name),1)])],10,O))),256)),e("div",G,[n(H,{disabled:s(h),name:"amount",placeholder:"Amount",modelValue:s(t).amount,"onUpdate:modelValue":a[0]||(a[0]=o=>s(t).amount=o),class:"mt-2"},null,8,["disabled","modelValue"]),s(t).name!=""?(l(),m("h3",J," Amount in USD: "+i(r.format_money(s(_)[s(t).name.toLowerCase()].usd*s(t).amount)),1)):v("",!0),d.validated?v("",!0):(l(),L(w,{key:1,disabled:s(h),class:"btn btn-outline-primary w-100",onButtonClicked:$},{default:g(()=>[n(C,{text:"Continue",loading:s(t).processing},null,8,["loading"])]),_:1},8,["disabled"]))])])]),e("div",K,[e("div",P,[d.validated?(l(),m("div",te,[e("div",oe,[e("img",{src:`/storage/payment_methods/${c.value.image}`,alt:"",class:"w-100 img-fluid"},null,8,se)]),e("strong",ae,[p(i(c.value.wallet)+" ",1),e("span",{class:"ml-2",onClick:a[1]||(a[1]=o=>s(S)(c.value.wallet))},ne)]),e("p",ie,[de,e("strong",null,i(parseFloat(s(t).amount))+i(c.value.symbol)+" or "+i(r.format_money(parseFloat(s(_)[s(t).name.toLowerCase()].usd*s(t).amount))),1),ce,e("strong",null,i(c.value.name),1),re]),me,e("input",{class:"form-control",type:"file",accept:"image/*",onChange:a[2]||(a[2]=o=>s(t).proof=o.target.files[0])},null,32),n(b,{name:"proof"}),n(w,{class:"btn btn-outline-primary w-100 mt-3",onButtonClicked:B},{default:g(()=>[n(C,{text:"Complete Deposit",loading:s(t).processing},null,8,["loading"])]),_:1})])):(l(),m("div",W,ee))])])])])])],64)}}};export{we as default};
