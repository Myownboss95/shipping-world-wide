import{i as A,c as h,x as g,r as U,a as d,b as u,d as a,e as t,u as o,F as k,g as D,n as V,w as c,t as n,q as L,j as N,l as j}from"./main.bac42695.js";import{b as F}from"./breadcrumb.2d4cfefa.js";import{_ as M}from"./paginator.8a8c3c80.js";import{_ as b}from"./FormButton.0cc94290.js";import{_ as f}from"./ButtonLoader.0bb0d3b3.js";import{_ as H}from"./modal.f3a712dd.js";import{_ as r}from"./FormGroup.1462db17.js";import"./error.34acba4a.js";import"./FormInput.c5b264e0.js";const P={class:"card shadow col-lg-10 mx-auto"},R={class:"card-body"},q={class:"table-responsive"},z={class:"table"},E=t("thead",null,[t("tr",null,[t("th",null,"User"),t("th",null,"Stop loss"),t("th",null,"Amount"),t("th",null,"Returns (Profit/Loss)"),t("th",null,"Type"),t("th",null,"Status"),t("th",null,"Asset"),t("th",null,"Asset Type"),t("th",null,"Date"),t("th",null,"Actions")])],-1),I={key:0},O={key:0},G=t("div",{else:""}," -- ",-1),J={key:1},K=t("tr",null,[t("td",{colspan:"10",class:"text-muted text-center"},"No trades found")],-1),Q=[K],W={key:0,class:"d-flex justify-content-center"},X={class:"modal-body"},Y=["onSubmit"],Z={class:"text-center"},rt={name:"index",props:{trades:Object},setup(x){const y=x,s=A({returns:"",asset:"",type:"",status:"",stop_loss:"",user:"",id:""}),m=h(()=>y.trades.data),C=h(()=>y.trades.links);g(null);const p=g(!1),T=i=>{let l=m.value.filter(_=>_.id==i)[0];s.returns=l.returns,s.amount=l.amount,s.type=l.type,s.status=l.status,s.stop_loss=l.stop_loss,s.asset=l.tradeable.name,s.user=l.user.first_name,s.id=l.id,p.value=!0},S=()=>{s.put(route("admin.trades.update",s.id))},w=i=>{j.Inertia.post(route("admin.trades.close",i),{},{onBefore:()=>confirm("Are you sure you want to close this trade?")})};return(i,l)=>{const _=U("Head");return d(),u(k,null,[a(_,{title:"Trades"}),a(F,{title:"Trades",crumbs:["Dashboard","Trades"]}),t("div",P,[t("div",R,[t("div",q,[t("table",z,[E,o(m).length?(d(),u("tbody",I,[(d(!0),u(k,null,D(o(m),(e,B)=>{var v;return d(),u("tr",{key:B},[t("td",null,n((v=e==null?void 0:e.user)==null?void 0:v.first_name),1),t("td",null,n(e.stop_loss),1),t("td",null,n(i.format_money(e.amount)),1),t("td",{class:L({"text-danger":e.returns<0,"text-success":e.returns>0})},n(i.format_money(e.returns)),3),t("td",null,n(e.type),1),t("td",null,n(e.status),1),t("td",null,n(e.tradeable.name),1),t("td",null,n(e.tradeable.type),1),t("td",null,n(new Date(e.created_at).toDateString()),1),t("td",null,[e.status=="active"?(d(),u("div",O,[a(b,{class:"btn btn-outline-primary btn-sm",onButtonClicked:$=>T(e.id)},{default:c(()=>[a(f,{text:"<i class='fa fa-edit'></i>"})]),_:2},1032,["onButtonClicked"]),a(b,{onButtonClicked:$=>w(e.id),class:"btn btn-outline-danger btn-sm ms-2"},{default:c(()=>[a(f,{text:"<i class='fa fa-times'></i>  Close",loading:o(s).processeing},null,8,["loading"])]),_:2},1032,["onButtonClicked"])])):V("",!0),G])])}),128))])):(d(),u("tbody",J,Q))])]),o(m).length?(d(),u("div",W,[a(M,{links:o(C)},null,8,["links"])])):V("",!0)])]),a(H,{title:"Modify Trade",open:p.value,onModalClosed:l[4]||(l[4]=e=>p.value=!1)},{default:c(()=>[t("div",X,[t("form",{class:"row",onSubmit:N(S,["prevent"])},[a(r,{class:"col-md-6",disabled:!0,name:"user",label:"User","model-value":o(s).user},null,8,["model-value"]),a(r,{class:"col-md-6",disabled:!0,name:"amount",label:"Amount","model-value":o(s).amount},null,8,["model-value"]),a(r,{class:"col-md-6",disabled:!0,name:"type",label:"Type","model-value":o(s).type},null,8,["model-value"]),a(r,{class:"col-md-6",disabled:!0,name:"status",label:"Status",modelValue:o(s).status,"onUpdate:modelValue":l[0]||(l[0]=e=>o(s).status=e)},null,8,["modelValue"]),a(r,{class:"col-md-6",disabled:!0,name:"asset",label:"Asset",modelValue:o(s).asset,"onUpdate:modelValue":l[1]||(l[1]=e=>o(s).asset=e)},null,8,["modelValue"]),a(r,{class:"col-md-6",disabled:!0,name:"stop_loss",label:"Stop Loss",modelValue:o(s).stop_loss,"onUpdate:modelValue":l[2]||(l[2]=e=>o(s).stop_loss=e)},null,8,["modelValue"]),a(r,{name:"returns",label:"Returns (Profit/Loss)",modelValue:o(s).returns,"onUpdate:modelValue":l[3]||(l[3]=e=>o(s).returns=e)},null,8,["modelValue"]),t("div",Z,[a(b,{type:"submit",class:"btn btn-outline-primary",disabled:o(s).processing},{default:c(()=>[a(f,{text:"Update Trade",loading:o(s).processing},null,8,["loading"])]),_:1},8,["disabled"])])],40,Y)])]),_:1},8,["open"])],64)}}};export{rt as default};
